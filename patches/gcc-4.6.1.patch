diff -bcrN gcc-4.6.1.org/gcc/config/es.h gcc-4.6.1/gcc/config/es.h
*** gcc-4.6.1.org/gcc/config/es.h	1970-01-01 09:00:00.000000000 +0900
--- gcc-4.6.1/gcc/config/es.h	2011-08-06 16:50:24.181313462 +0900
***************
*** 0 ****
--- 1,45 ----
+ /* Definitions for es systems with ELF format
+    Copyright (C) 1995, 1996, 1997, 1998, 1999, 2000 Free Software Foundation, Inc.
+ 
+ This file is part of GNU CC.
+ 
+ GNU CC is free software; you can redistribute it and/or modify
+ it under the terms of the GNU General Public License as published by
+ the Free Software Foundation; either version 2, or (at your option)
+ any later version.
+ 
+ GNU CC is distributed in the hope that it will be useful,
+ but WITHOUT ANY WARRANTY; without even the implied warranty of
+ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ GNU General Public License for more details.
+ 
+ You should have received a copy of the GNU General Public License
+ along with GNU CC; see the file COPYING.  If not, write to
+ the Free Software Foundation, 59 Temple Place - Suite 330,
+ Boston, MA 02111-1307, USA.  */
+ 
+ /* The system headers under es are C++-aware.  */
+ #undef NO_IMPLICIT_EXTERN_C
+ #define NO_IMPLICIT_EXTERN_C
+ 
+ /* Provide a STARTFILE_SPEC appropriate for GNU/Linux.  Here we add
+    the GNU/Linux magical crtbegin.o file (see crtstuff.c) which
+    provides part of the support for getting C++ file-scope static
+    object constructed before entering `main'.  */
+ 
+ #undef  STARTFILE_SPEC
+ #define STARTFILE_SPEC \
+   "crt0.o%s crti.o%s crtbegin.o%s"
+ 
+ /* Provide a ENDFILE_SPEC appropriate for GNU/Linux.  Here we tack on
+    the GNU/Linux magical crtend.o file (see crtstuff.c) which
+    provides part of the support for getting C++ file-scope static
+    object constructed before entering `main', followed by a normal
+    GNU/Linux "finalizer" file, `crtn.o'.  */
+ 
+ #undef  ENDFILE_SPEC
+ #define ENDFILE_SPEC \
+   "crtend.o%s crtn.o%s"
+ 
+ #undef LIB_SPEC
+ #define LIB_SPEC "-lc -les -lc -les"
diff -bcrN gcc-4.6.1.org/gcc/config/gthr-es.c gcc-4.6.1/gcc/config/gthr-es.c
*** gcc-4.6.1.org/gcc/config/gthr-es.c	1970-01-01 09:00:00.000000000 +0900
--- gcc-4.6.1/gcc/config/gthr-es.c	2011-08-06 16:50:24.182313465 +0900
***************
*** 0 ****
--- 1,120 ----
+ /* Implementation of es-specific threads compatibility routines for
+    libgcc2.   */
+ 
+ /* Copyright (C) 1999, 2000, 2002 Free Software Foundation, Inc.
+ 
+ This file is part of GCC.
+ 
+ GCC is free software; you can redistribute it and/or modify it under
+ the terms of the GNU General Public License as published by the Free
+ Software Foundation; either version 2, or (at your option) any later
+ version.
+ 
+ GCC is distributed in the hope that it will be useful, but WITHOUT ANY
+ WARRANTY; without even the implied warranty of MERCHANTABILITY or
+ FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+ for more details.
+ 
+ You should have received a copy of the GNU General Public License
+ along with GCC; see the file COPYING.  If not, write to the Free
+ Software Foundation, 59 Temple Place - Suite 330, Boston, MA
+ 02111-1307, USA.  */
+ 
+ /* As a special exception, if you link this library with other files,
+    some of which are compiled with GCC, to produce an executable,
+    this library does not by itself cause the resulting executable
+    to be covered by the GNU General Public License.
+    This exception does not however invalidate any other reasons why
+    the executable file might be covered by the GNU General Public License.  */
+ 
+ #include <gthr-es.h>
+ 
+ int
+ __gthread_active_p (void)
+ {
+   return 1;
+ }
+ 
+ int
+ __gthread_once (__gthread_once_t *once, void (*func) (void))
+ {
+   return pthread_once(once, func);
+ }
+ 
+ int
+ __gthread_key_create (__gthread_key_t *key, void (*dtor) (void *))
+ {
+   return pthread_key_create (key, dtor);
+ }
+ 
+ int
+ __gthread_key_dtor (__gthread_key_t key, void *ptr)
+ {
+   /* Just reset the key value to zero.  */
+   if (ptr)
+     return __gthread_setspecific (key, 0);
+   else
+     return 0;
+ }
+ 
+ int
+ __gthread_key_delete (__gthread_key_t key)
+ {
+   return pthread_key_delete (key);
+ }
+ 
+ void *
+ __gthread_getspecific (__gthread_key_t key)
+ {
+   return pthread_getspecific (key);
+ }
+ 
+ int
+ __gthread_setspecific (__gthread_key_t key, const void *ptr)
+ {
+   return pthread_setspecific (key, ptr);
+ }
+ 
+ void
+ __gthread_mutex_init_function (__gthread_mutex_t *mutex)
+ {
+   pthread_mutex_init  (mutex, 0);
+ }
+ 
+ int
+ __gthread_mutex_lock (__gthread_mutex_t *mutex)
+ {
+   pthread_mutex_lock (mutex);
+   return 0;
+ }
+ 
+ int
+ __gthread_mutex_trylock (__gthread_mutex_t *mutex)
+ {
+   return pthread_mutex_trylock (mutex);
+ }
+ 
+ int
+ __gthread_mutex_unlock (__gthread_mutex_t *mutex)
+ {
+   pthread_mutex_unlock (mutex);
+   return 0;
+ }
+ 
+ int
+ __gthread_recursive_mutex_lock (__gthread_recursive_mutex_t *mutex)
+ {
+   return __gthread_mutex_lock (mutex);
+ }
+ 
+ int
+ __gthread_recursive_mutex_trylock (__gthread_recursive_mutex_t *mutex)
+ {
+   return __gthread_mutex_trylock (mutex);
+ }
+ 
+ int
+ __gthread_recursive_mutex_unlock (__gthread_recursive_mutex_t *mutex)
+ {
+   return __gthread_mutex_unlock (mutex);
+ }
diff -bcrN gcc-4.6.1.org/gcc/config/i386/es-elf.h gcc-4.6.1/gcc/config/i386/es-elf.h
*** gcc-4.6.1.org/gcc/config/i386/es-elf.h	1970-01-01 09:00:00.000000000 +0900
--- gcc-4.6.1/gcc/config/i386/es-elf.h	2011-08-06 16:50:24.216313573 +0900
***************
*** 0 ****
--- 1,34 ----
+ /* Definitions for es targeting an ix86 using ELF.
+    Copyright (C) 1996, 1997, 2000, 2001, 2002 Free Software Foundation, Inc.
+ 
+ This file is part of GNU CC.
+ 
+ GNU CC is free software; you can redistribute it and/or modify
+ it under the terms of the GNU General Public License as published by
+ the Free Software Foundation; either version 2, or (at your option)
+ any later version.
+ 
+ GNU CC is distributed in the hope that it will be useful,
+ but WITHOUT ANY WARRANTY; without even the implied warranty of
+ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ GNU General Public License for more details.
+ 
+ You should have received a copy of the GNU General Public License
+ along with GNU CC; see the file COPYING.  If not, write to
+ the Free Software Foundation, 59 Temple Place - Suite 330,
+ Boston, MA 02111-1307, USA.  */
+ 
+ #define TARGET_EXECUTABLE_SUFFIX ".elf"
+ #define HOST_EXECUTABLE_SUFFIX  ".elf"
+ 
+ /* Specify predefined symbols in preprocessor.  */
+ 
+ #define TARGET_OS_CPP_BUILTINS()                \
+   do                                            \
+     {                                           \
+         builtin_define ("__i386__");            \
+         builtin_define ("__es__");              \
+         builtin_define ("__ELF__");             \
+         builtin_assert ("system=es");           \
+     }                                           \
+   while (0)
diff -bcrN gcc-4.6.1.org/gcc/config/i386/t-es-i386 gcc-4.6.1/gcc/config/i386/t-es-i386
*** gcc-4.6.1.org/gcc/config/i386/t-es-i386	1970-01-01 09:00:00.000000000 +0900
--- gcc-4.6.1/gcc/config/i386/t-es-i386	2011-08-06 16:50:24.217313576 +0900
***************
*** 0 ****
--- 1,8 ----
+ # Assemble startup files.
+ $(T)crti.o: $(srcdir)/config/i386/sol2-ci.asm $(GCC_PASSES)
+ 	sed -e '/^!/d' <$(srcdir)/config/i386/sol2-ci.asm >crti.s
+ 	$(GCC_FOR_TARGET) -c -o $(T)crti.o crti.s
+ $(T)crtn.o: $(srcdir)/config/i386/sol2-cn.asm $(GCC_PASSES)
+ 	sed -e '/^!/d' <$(srcdir)/config/i386/sol2-cn.asm >crtn.s
+ 	$(GCC_FOR_TARGET) -c -o $(T)crtn.o crtn.s
+ 
diff -bcrN gcc-4.6.1.org/gcc/config/t-es gcc-4.6.1/gcc/config/t-es
*** gcc-4.6.1.org/gcc/config/t-es	1970-01-01 09:00:00.000000000 +0900
--- gcc-4.6.1/gcc/config/t-es	2011-08-06 16:50:24.217313576 +0900
***************
*** 0 ****
--- 1 ----
+ LIB2FUNCS_EXTRA = $(srcdir)/config/gthr-es.c
diff -bcrN gcc-4.6.1.org/gcc/config.gcc gcc-4.6.1/gcc/config.gcc
*** gcc-4.6.1.org/gcc/config.gcc	2011-05-23 05:03:43.000000000 +0900
--- gcc-4.6.1/gcc/config.gcc	2011-08-06 16:50:24.233313626 +0900
***************
*** 1350,1355 ****
--- 1350,1363 ----
  	extra_parts="crtbegin.o crtend.o crti.o crtn.o"
  	tmake_file="${tmake_file} i386/t-rtems-i386 i386/t-crtstuff t-rtems"
  	;;
+ i[34567]86-*-es*)
+ 	tm_file="${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h i386/i386elf.h i386/es-elf.h es.h"
+ 	extra_parts="crti.o crtn.o crtbegin.o crtend.o"
+ 	tmake_file="i386/t-crtstuff i386/t-es-i386 t-es"
+ 	case ${enable_threads} in
+ 		yes) thread_file='es' ;;
+ 	esac
+ 	;;
  i[34567]86-*-solaris2*)
  	tm_file="${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h i386/sysv4.h sol2.h"
  	# Set default arch_32 to pentium4, tune_32 to generic like the other
diff -bcrN gcc-4.6.1.org/gcc/configure gcc-4.6.1/gcc/configure
*** gcc-4.6.1.org/gcc/configure	2011-03-01 00:36:37.000000000 +0900
--- gcc-4.6.1/gcc/configure	2011-08-06 16:50:24.249313678 +0900
***************
*** 10790,10796 ****
      target_thread_file='single'
      ;;
    aix | dce | gnat | irix | posix | posix95 | rtems | \
!   single | solaris | vxworks | win32 | mipssde)
      target_thread_file=${enable_threads}
      ;;
    *)
--- 10790,10796 ----
      target_thread_file='single'
      ;;
    aix | dce | gnat | irix | posix | posix95 | rtems | \
!   single | solaris | vxworks | win32 | mipssde | es)
      target_thread_file=${enable_threads}
      ;;
    *)
diff -bcrN gcc-4.6.1.org/gcc/configure.ac gcc-4.6.1/gcc/configure.ac
*** gcc-4.6.1.org/gcc/configure.ac	2011-03-01 00:36:37.000000000 +0900
--- gcc-4.6.1/gcc/configure.ac	2011-08-06 16:50:24.256313699 +0900
***************
*** 1332,1338 ****
      target_thread_file='single'
      ;;
    aix | dce | gnat | irix | posix | posix95 | rtems | \
!   single | solaris | vxworks | win32 | mipssde)
      target_thread_file=${enable_threads}
      ;;
    *)
--- 1332,1338 ----
      target_thread_file='single'
      ;;
    aix | dce | gnat | irix | posix | posix95 | rtems | \
!   single | solaris | vxworks | win32 | mipssde | es)
      target_thread_file=${enable_threads}
      ;;
    *)
diff -bcrN gcc-4.6.1.org/gcc/gthr-es.h gcc-4.6.1/gcc/gthr-es.h
*** gcc-4.6.1.org/gcc/gthr-es.h	1970-01-01 09:00:00.000000000 +0900
--- gcc-4.6.1/gcc/gthr-es.h	2011-08-06 16:50:24.257313702 +0900
***************
*** 0 ****
--- 1,67 ----
+ /* Threads compatibility routines for libgcc2 and libobjc.  */
+ /* Compile this one with gcc.  */
+ /* Copyright (C) 1999, 2000, 2002 Free Software Foundation, Inc.
+ 
+ This file is part of GCC.
+ 
+ GCC is free software; you can redistribute it and/or modify it under
+ the terms of the GNU General Public License as published by the Free
+ Software Foundation; either version 2, or (at your option) any later
+ version.
+ 
+ GCC is distributed in the hope that it will be useful, but WITHOUT ANY
+ WARRANTY; without even the implied warranty of MERCHANTABILITY or
+ FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+ for more details.
+ 
+ You should have received a copy of the GNU General Public License
+ along with GCC; see the file COPYING.  If not, write to the Free
+ Software Foundation, 59 Temple Place - Suite 330, Boston, MA
+ 02111-1307, USA.  */
+ 
+ /* As a special exception, if you link this library with other files,
+    some of which are compiled with GCC, to produce an executable,
+    this library does not by itself cause the resulting executable
+    to be covered by the GNU General Public License.
+    This exception does not however invalidate any other reasons why
+    the executable file might be covered by the GNU General Public License.  */
+ 
+ #ifndef GCC_GTHR_ES_H
+ #define GCC_GTHR_ES_H
+ 
+ #define __GTHREADS 1
+ #include <pthread.h>
+ 
+ #ifdef __cplusplus
+ extern "C" {
+ #endif
+ 
+ typedef pthread_key_t __gthread_key_t;
+ typedef pthread_once_t __gthread_once_t;
+ typedef pthread_mutex_t __gthread_mutex_t;
+ typedef pthread_mutex_t __gthread_recursive_mutex_t;
+ 
+ #define __GTHREAD_MUTEX_INIT PTHREAD_MUTEX_INITIALIZER
+ #define __GTHREAD_ONCE_INIT PTHREAD_ONCE_INIT
+ #define __GTHREAD_RECURSIVE_MUTEX_INIT PTHREAD_MUTEX_INITIALIZER
+ 
+ int __gthread_active_p (void);
+ int __gthread_once (__gthread_once_t *once, void (*func) (void));
+ int __gthread_key_create (__gthread_key_t *key, void (*dtor) (void *));
+ int __gthread_key_dtor (__gthread_key_t key, void *ptr);
+ int __gthread_key_delete (__gthread_key_t key);
+ void* __gthread_getspecific (__gthread_key_t key);
+ int __gthread_setspecific (__gthread_key_t key, const void *ptr);
+ void __gthread_mutex_init_function (__gthread_mutex_t *mutex);
+ int __gthread_mutex_lock (__gthread_mutex_t *mutex);
+ int __gthread_mutex_trylock (__gthread_mutex_t *mutex);
+ int __gthread_mutex_unlock (__gthread_mutex_t *mutex);
+ int __gthread_recursive_mutex_lock (__gthread_recursive_mutex_t *mutex);
+ int __gthread_recursive_mutex_trylock (__gthread_recursive_mutex_t *mutex);
+ int __gthread_recursive_mutex_unlock (__gthread_recursive_mutex_t *mutex);
+ 
+ #ifdef __cplusplus
+ }
+ #endif
+ 
+ #endif /* ! GCC_GTHR_ES_H */
diff -bcrN gcc-4.6.1.org/libgcc/config.host gcc-4.6.1/libgcc/config.host
*** gcc-4.6.1.org/libgcc/config.host	2011-03-14 15:06:23.000000000 +0900
--- gcc-4.6.1/libgcc/config.host	2011-08-06 16:50:24.258313705 +0900
***************
*** 168,173 ****
--- 168,175 ----
    ;;
  *-*-rtems*)
    ;;
+ *-*-es*)
+   ;;
  *-*-vxworks*)
    ;;
  *-*-elf)
***************
*** 320,325 ****
--- 322,329 ----
  	;;
  i[34567]86-*-rtems*)
  	;;
+ i[34567]86-*-es*)
+ 	;;
  i[34567]86-*-solaris2*)
  	tmake_file="${tmake_file} i386/t-sol2"
  	case ${host} in
diff -bcrN gcc-4.6.1.org/zlib/Makefile.am gcc-4.6.1/zlib/Makefile.am
*** gcc-4.6.1.org/zlib/Makefile.am	2009-08-22 22:41:50.000000000 +0900
--- gcc-4.6.1/zlib/Makefile.am	2011-08-06 16:50:35.246348419 +0900
***************
*** 16,21 ****
--- 16,24 ----
  toolexeclib_LIBRARIES = libz.a
  libz_a_SOURCES = $(ZLIB_SOURCES)
  libz_a_CFLAGS = $(AM_CFLAGS)
+ include_HEADERS = \
+ 	zconf.h \
+ 	zlib.h
  endif
  
  # Work around what appears to be a GNU make bug handling MAKEFLAGS
diff -bcrN gcc-4.6.1.org/zlib/Makefile.in gcc-4.6.1/zlib/Makefile.in
*** gcc-4.6.1.org/zlib/Makefile.in	2010-04-03 03:18:06.000000000 +0900
--- gcc-4.6.1/zlib/Makefile.in	2011-08-06 17:03:19.554763015 +0900
***************
*** 16,21 ****
--- 16,22 ----
  @SET_MAKE@
  
  
+ 
  VPATH = @srcdir@
  pkgdatadir = $(datadir)/@PACKAGE@
  pkgincludedir = $(includedir)/@PACKAGE@
***************
*** 39,53 ****
  subdir = .
  DIST_COMMON = README ChangeLog $(srcdir)/Makefile.in \
  	$(srcdir)/Makefile.am $(top_srcdir)/configure \
! 	$(am__configure_deps) $(srcdir)/../mkinstalldirs
  ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
! am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \
! 	$(top_srcdir)/../config/lead-dot.m4 \
! 	$(top_srcdir)/../config/multi.m4 \
! 	$(top_srcdir)/../config/override.m4 \
! 	$(top_srcdir)/../ltoptions.m4 $(top_srcdir)/../ltsugar.m4 \
! 	$(top_srcdir)/../ltversion.m4 $(top_srcdir)/../lt~obsolete.m4 \
! 	$(top_srcdir)/acinclude.m4 \
  	$(top_srcdir)/../config/no-executables.m4 \
  	$(top_srcdir)/../libtool.m4 $(top_srcdir)/configure.ac
  am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
--- 40,49 ----
  subdir = .
  DIST_COMMON = README ChangeLog $(srcdir)/Makefile.in \
  	$(srcdir)/Makefile.am $(top_srcdir)/configure \
! 	$(am__configure_deps) $(srcdir)/../mkinstalldirs \
! 	$(am__include_HEADERS_DIST)
  ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
! am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \
  	$(top_srcdir)/../config/no-executables.m4 \
  	$(top_srcdir)/../libtool.m4 $(top_srcdir)/configure.ac
  am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
***************
*** 77,83 ****
  am__base_list = \
    sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\n/ /g' | \
    sed '$$!N;$$!N;$$!N;$$!N;s/\n/ /g'
! am__installdirs = "$(DESTDIR)$(toolexeclibdir)"
  LIBRARIES = $(toolexeclib_LIBRARIES)
  ARFLAGS = cru
  libz_a_AR = $(AR) $(ARFLAGS)
--- 73,80 ----
  am__base_list = \
    sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\n/ /g' | \
    sed '$$!N;$$!N;$$!N;$$!N;s/\n/ /g'
! am__installdirs = "$(DESTDIR)$(toolexeclibdir)" \
! 	"$(DESTDIR)$(includedir)"
  LIBRARIES = $(toolexeclib_LIBRARIES)
  ARFLAGS = cru
  libz_a_AR = $(AR) $(ARFLAGS)
***************
*** 118,123 ****
--- 115,122 ----
  MULTISUBDIR = 
  MULTIDO = true
  MULTICLEAN = true
+ am__include_HEADERS_DIST = zconf.h zlib.h
+ HEADERS = $(include_HEADERS)
  ETAGS = etags
  CTAGS = ctags
  ACLOCAL = @ACLOCAL@
***************
*** 253,258 ****
--- 252,261 ----
  @TARGET_LIBRARY_FALSE@toolexeclib_LIBRARIES = libz.a
  @TARGET_LIBRARY_FALSE@libz_a_SOURCES = $(ZLIB_SOURCES)
  @TARGET_LIBRARY_FALSE@libz_a_CFLAGS = $(AM_CFLAGS)
+ @TARGET_LIBRARY_FALSE@include_HEADERS = \
+ @TARGET_LIBRARY_FALSE@	zconf.h \
+ @TARGET_LIBRARY_FALSE@	zlib.h
+ 
  
  # Work around what appears to be a GNU make bug handling MAKEFLAGS
  # values defined in terms of make variables, as is the case for CC and
***************
*** 493,498 ****
--- 496,521 ----
  	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=distclean multi-clean # $(MAKE)
  maintainer-clean-multi:
  	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean # $(MAKE)
+ install-includeHEADERS: $(include_HEADERS)
+ 	@$(NORMAL_INSTALL)
+ 	test -z "$(includedir)" || $(MKDIR_P) "$(DESTDIR)$(includedir)"
+ 	@list='$(include_HEADERS)'; test -n "$(includedir)" || list=; \
+ 	for p in $$list; do \
+ 	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+ 	  echo "$$d$$p"; \
+ 	done | $(am__base_list) | \
+ 	while read files; do \
+ 	  echo " $(INSTALL_HEADER) $$files '$(DESTDIR)$(includedir)'"; \
+ 	  $(INSTALL_HEADER) $$files "$(DESTDIR)$(includedir)" || exit $$?; \
+ 	done
+ 
+ uninstall-includeHEADERS:
+ 	@$(NORMAL_UNINSTALL)
+ 	@list='$(include_HEADERS)'; test -n "$(includedir)" || list=; \
+ 	files=`for p in $$list; do echo $$p; done | sed -e 's|^.*/||'`; \
+ 	test -n "$$files" || exit 0; \
+ 	echo " ( cd '$(DESTDIR)$(includedir)' && rm -f" $$files ")"; \
+ 	cd "$(DESTDIR)$(includedir)" && rm -f $$files
  
  ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
  	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
***************
*** 547,555 ****
  	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
  check-am:
  check: check-am
! all-am: Makefile $(LIBRARIES) $(LTLIBRARIES) all-multi
  installdirs:
! 	for dir in "$(DESTDIR)$(toolexeclibdir)"; do \
  	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
  	done
  install: install-am
--- 570,578 ----
  	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
  check-am:
  check: check-am
! all-am: Makefile $(LIBRARIES) $(LTLIBRARIES) all-multi $(HEADERS)
  installdirs:
! 	for dir in "$(DESTDIR)$(toolexeclibdir)" "$(DESTDIR)$(includedir)"; do \
  	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
  	done
  install: install-am
***************
*** 600,606 ****
  
  info-am:
  
! install-data-am:
  
  install-dvi: install-dvi-am
  
--- 623,629 ----
  
  info-am:
  
! install-data-am: install-includeHEADERS
  
  install-dvi: install-dvi-am
  
***************
*** 647,653 ****
  
  ps-am:
  
! uninstall-am: uninstall-toolexeclibLIBRARIES
  
  .MAKE: all-multi clean-multi distclean-multi install-am install-multi \
  	install-strip maintainer-clean-multi mostlyclean-multi
--- 670,676 ----
  
  ps-am:
  
! uninstall-am: uninstall-includeHEADERS uninstall-toolexeclibLIBRARIES
  
  .MAKE: all-multi clean-multi distclean-multi install-am install-multi \
  	install-strip maintainer-clean-multi mostlyclean-multi
***************
*** 659,673 ****
  	distclean-libtool distclean-multi distclean-tags dvi dvi-am \
  	html html-am info info-am install install-am install-data \
  	install-data-am install-dvi install-dvi-am install-exec \
! 	install-exec-am install-html install-html-am install-info \
! 	install-info-am install-man install-multi install-pdf \
! 	install-pdf-am install-ps install-ps-am install-strip \
  	install-toolexeclibLIBRARIES installcheck installcheck-am \
  	installdirs maintainer-clean maintainer-clean-generic \
  	maintainer-clean-multi mostlyclean mostlyclean-compile \
  	mostlyclean-generic mostlyclean-libtool mostlyclean-multi pdf \
  	pdf-am ps ps-am tags uninstall uninstall-am \
! 	uninstall-toolexeclibLIBRARIES
  
  
  # Tell versions [3.59,3.63) of GNU make to not export all variables.
--- 682,697 ----
  	distclean-libtool distclean-multi distclean-tags dvi dvi-am \
  	html html-am info info-am install install-am install-data \
  	install-data-am install-dvi install-dvi-am install-exec \
! 	install-exec-am install-html install-html-am \
! 	install-includeHEADERS install-info install-info-am \
! 	install-man install-multi install-pdf install-pdf-am \
! 	install-ps install-ps-am install-strip \
  	install-toolexeclibLIBRARIES installcheck installcheck-am \
  	installdirs maintainer-clean maintainer-clean-generic \
  	maintainer-clean-multi mostlyclean mostlyclean-compile \
  	mostlyclean-generic mostlyclean-libtool mostlyclean-multi pdf \
  	pdf-am ps ps-am tags uninstall uninstall-am \
! 	uninstall-includeHEADERS uninstall-toolexeclibLIBRARIES
  
  
  # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -bcrN gcc-4.6.1.org/zlib/aclocal.m4 gcc-4.6.1/zlib/aclocal.m4
*** gcc-4.6.1.org/zlib/aclocal.m4	2010-04-03 03:18:06.000000000 +0900
--- gcc-4.6.1/zlib/aclocal.m4	2011-08-06 17:03:03.012710757 +0900
***************
*** 19,24 ****
--- 19,635 ----
  If you have problems, you may need to regenerate the build system entirely.
  To do so, use the procedure documented by the package, typically `autoreconf'.])])
  
+ # Helper functions for option handling.                    -*- Autoconf -*-
+ #
+ #   Copyright (C) 2004, 2005, 2007, 2008, 2009 Free Software Foundation,
+ #   Inc.
+ #   Written by Gary V. Vaughan, 2004
+ #
+ # This file is free software; the Free Software Foundation gives
+ # unlimited permission to copy and/or distribute it, with or without
+ # modifications, as long as this notice is preserved.
+ 
+ # serial 7 ltoptions.m4
+ 
+ # This is to help aclocal find these macros, as it can't see m4_define.
+ AC_DEFUN([LTOPTIONS_VERSION], [m4_if([1])])
+ 
+ 
+ # _LT_MANGLE_OPTION(MACRO-NAME, OPTION-NAME)
+ # ------------------------------------------
+ m4_define([_LT_MANGLE_OPTION],
+ [[_LT_OPTION_]m4_bpatsubst($1__$2, [[^a-zA-Z0-9_]], [_])])
+ 
+ 
+ # _LT_SET_OPTION(MACRO-NAME, OPTION-NAME)
+ # ---------------------------------------
+ # Set option OPTION-NAME for macro MACRO-NAME, and if there is a
+ # matching handler defined, dispatch to it.  Other OPTION-NAMEs are
+ # saved as a flag.
+ m4_define([_LT_SET_OPTION],
+ [m4_define(_LT_MANGLE_OPTION([$1], [$2]))dnl
+ m4_ifdef(_LT_MANGLE_DEFUN([$1], [$2]),
+         _LT_MANGLE_DEFUN([$1], [$2]),
+     [m4_warning([Unknown $1 option `$2'])])[]dnl
+ ])
+ 
+ 
+ # _LT_IF_OPTION(MACRO-NAME, OPTION-NAME, IF-SET, [IF-NOT-SET])
+ # ------------------------------------------------------------
+ # Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
+ m4_define([_LT_IF_OPTION],
+ [m4_ifdef(_LT_MANGLE_OPTION([$1], [$2]), [$3], [$4])])
+ 
+ 
+ # _LT_UNLESS_OPTIONS(MACRO-NAME, OPTION-LIST, IF-NOT-SET)
+ # -------------------------------------------------------
+ # Execute IF-NOT-SET unless all options in OPTION-LIST for MACRO-NAME
+ # are set.
+ m4_define([_LT_UNLESS_OPTIONS],
+ [m4_foreach([_LT_Option], m4_split(m4_normalize([$2])),
+ 	    [m4_ifdef(_LT_MANGLE_OPTION([$1], _LT_Option),
+ 		      [m4_define([$0_found])])])[]dnl
+ m4_ifdef([$0_found], [m4_undefine([$0_found])], [$3
+ ])[]dnl
+ ])
+ 
+ 
+ # _LT_SET_OPTIONS(MACRO-NAME, OPTION-LIST)
+ # ----------------------------------------
+ # OPTION-LIST is a space-separated list of Libtool options associated
+ # with MACRO-NAME.  If any OPTION has a matching handler declared with
+ # LT_OPTION_DEFINE, dispatch to that macro; otherwise complain about
+ # the unknown option and exit.
+ m4_defun([_LT_SET_OPTIONS],
+ [# Set options
+ m4_foreach([_LT_Option], m4_split(m4_normalize([$2])),
+     [_LT_SET_OPTION([$1], _LT_Option)])
+ 
+ m4_if([$1],[LT_INIT],[
+   dnl
+   dnl Simply set some default values (i.e off) if boolean options were not
+   dnl specified:
+   _LT_UNLESS_OPTIONS([LT_INIT], [dlopen], [enable_dlopen=no
+   ])
+   _LT_UNLESS_OPTIONS([LT_INIT], [win32-dll], [enable_win32_dll=no
+   ])
+   dnl
+   dnl If no reference was made to various pairs of opposing options, then
+   dnl we run the default mode handler for the pair.  For example, if neither
+   dnl `shared' nor `disable-shared' was passed, we enable building of shared
+   dnl archives by default:
+   _LT_UNLESS_OPTIONS([LT_INIT], [shared disable-shared], [_LT_ENABLE_SHARED])
+   _LT_UNLESS_OPTIONS([LT_INIT], [static disable-static], [_LT_ENABLE_STATIC])
+   _LT_UNLESS_OPTIONS([LT_INIT], [pic-only no-pic], [_LT_WITH_PIC])
+   _LT_UNLESS_OPTIONS([LT_INIT], [fast-install disable-fast-install],
+   		   [_LT_ENABLE_FAST_INSTALL])
+   ])
+ ])# _LT_SET_OPTIONS
+ 
+ 
+ 
+ # _LT_MANGLE_DEFUN(MACRO-NAME, OPTION-NAME)
+ # -----------------------------------------
+ m4_define([_LT_MANGLE_DEFUN],
+ [[_LT_OPTION_DEFUN_]m4_bpatsubst(m4_toupper([$1__$2]), [[^A-Z0-9_]], [_])])
+ 
+ 
+ # LT_OPTION_DEFINE(MACRO-NAME, OPTION-NAME, CODE)
+ # -----------------------------------------------
+ m4_define([LT_OPTION_DEFINE],
+ [m4_define(_LT_MANGLE_DEFUN([$1], [$2]), [$3])[]dnl
+ ])# LT_OPTION_DEFINE
+ 
+ 
+ # dlopen
+ # ------
+ LT_OPTION_DEFINE([LT_INIT], [dlopen], [enable_dlopen=yes
+ ])
+ 
+ AU_DEFUN([AC_LIBTOOL_DLOPEN],
+ [_LT_SET_OPTION([LT_INIT], [dlopen])
+ AC_DIAGNOSE([obsolete],
+ [$0: Remove this warning and the call to _LT_SET_OPTION when you
+ put the `dlopen' option into LT_INIT's first parameter.])
+ ])
+ 
+ dnl aclocal-1.4 backwards compatibility:
+ dnl AC_DEFUN([AC_LIBTOOL_DLOPEN], [])
+ 
+ 
+ # win32-dll
+ # ---------
+ # Declare package support for building win32 dll's.
+ LT_OPTION_DEFINE([LT_INIT], [win32-dll],
+ [enable_win32_dll=yes
+ 
+ case $host in
+ *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-cegcc*)
+   AC_CHECK_TOOL(AS, as, false)
+   AC_CHECK_TOOL(DLLTOOL, dlltool, false)
+   AC_CHECK_TOOL(OBJDUMP, objdump, false)
+   ;;
+ esac
+ 
+ test -z "$AS" && AS=as
+ _LT_DECL([], [AS],      [1], [Assembler program])dnl
+ 
+ test -z "$DLLTOOL" && DLLTOOL=dlltool
+ _LT_DECL([], [DLLTOOL], [1], [DLL creation program])dnl
+ 
+ test -z "$OBJDUMP" && OBJDUMP=objdump
+ _LT_DECL([], [OBJDUMP], [1], [Object dumper program])dnl
+ ])# win32-dll
+ 
+ AU_DEFUN([AC_LIBTOOL_WIN32_DLL],
+ [AC_REQUIRE([AC_CANONICAL_HOST])dnl
+ _LT_SET_OPTION([LT_INIT], [win32-dll])
+ AC_DIAGNOSE([obsolete],
+ [$0: Remove this warning and the call to _LT_SET_OPTION when you
+ put the `win32-dll' option into LT_INIT's first parameter.])
+ ])
+ 
+ dnl aclocal-1.4 backwards compatibility:
+ dnl AC_DEFUN([AC_LIBTOOL_WIN32_DLL], [])
+ 
+ 
+ # _LT_ENABLE_SHARED([DEFAULT])
+ # ----------------------------
+ # implement the --enable-shared flag, and supports the `shared' and
+ # `disable-shared' LT_INIT options.
+ # DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
+ m4_define([_LT_ENABLE_SHARED],
+ [m4_define([_LT_ENABLE_SHARED_DEFAULT], [m4_if($1, no, no, yes)])dnl
+ AC_ARG_ENABLE([shared],
+     [AS_HELP_STRING([--enable-shared@<:@=PKGS@:>@],
+ 	[build shared libraries @<:@default=]_LT_ENABLE_SHARED_DEFAULT[@:>@])],
+     [p=${PACKAGE-default}
+     case $enableval in
+     yes) enable_shared=yes ;;
+     no) enable_shared=no ;;
+     *)
+       enable_shared=no
+       # Look at the argument we got.  We use all the common list separators.
+       lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+       for pkg in $enableval; do
+ 	IFS="$lt_save_ifs"
+ 	if test "X$pkg" = "X$p"; then
+ 	  enable_shared=yes
+ 	fi
+       done
+       IFS="$lt_save_ifs"
+       ;;
+     esac],
+     [enable_shared=]_LT_ENABLE_SHARED_DEFAULT)
+ 
+     _LT_DECL([build_libtool_libs], [enable_shared], [0],
+ 	[Whether or not to build shared libraries])
+ ])# _LT_ENABLE_SHARED
+ 
+ LT_OPTION_DEFINE([LT_INIT], [shared], [_LT_ENABLE_SHARED([yes])])
+ LT_OPTION_DEFINE([LT_INIT], [disable-shared], [_LT_ENABLE_SHARED([no])])
+ 
+ # Old names:
+ AC_DEFUN([AC_ENABLE_SHARED],
+ [_LT_SET_OPTION([LT_INIT], m4_if([$1], [no], [disable-])[shared])
+ ])
+ 
+ AC_DEFUN([AC_DISABLE_SHARED],
+ [_LT_SET_OPTION([LT_INIT], [disable-shared])
+ ])
+ 
+ AU_DEFUN([AM_ENABLE_SHARED], [AC_ENABLE_SHARED($@)])
+ AU_DEFUN([AM_DISABLE_SHARED], [AC_DISABLE_SHARED($@)])
+ 
+ dnl aclocal-1.4 backwards compatibility:
+ dnl AC_DEFUN([AM_ENABLE_SHARED], [])
+ dnl AC_DEFUN([AM_DISABLE_SHARED], [])
+ 
+ 
+ 
+ # _LT_ENABLE_STATIC([DEFAULT])
+ # ----------------------------
+ # implement the --enable-static flag, and support the `static' and
+ # `disable-static' LT_INIT options.
+ # DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
+ m4_define([_LT_ENABLE_STATIC],
+ [m4_define([_LT_ENABLE_STATIC_DEFAULT], [m4_if($1, no, no, yes)])dnl
+ AC_ARG_ENABLE([static],
+     [AS_HELP_STRING([--enable-static@<:@=PKGS@:>@],
+ 	[build static libraries @<:@default=]_LT_ENABLE_STATIC_DEFAULT[@:>@])],
+     [p=${PACKAGE-default}
+     case $enableval in
+     yes) enable_static=yes ;;
+     no) enable_static=no ;;
+     *)
+      enable_static=no
+       # Look at the argument we got.  We use all the common list separators.
+       lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+       for pkg in $enableval; do
+ 	IFS="$lt_save_ifs"
+ 	if test "X$pkg" = "X$p"; then
+ 	  enable_static=yes
+ 	fi
+       done
+       IFS="$lt_save_ifs"
+       ;;
+     esac],
+     [enable_static=]_LT_ENABLE_STATIC_DEFAULT)
+ 
+     _LT_DECL([build_old_libs], [enable_static], [0],
+ 	[Whether or not to build static libraries])
+ ])# _LT_ENABLE_STATIC
+ 
+ LT_OPTION_DEFINE([LT_INIT], [static], [_LT_ENABLE_STATIC([yes])])
+ LT_OPTION_DEFINE([LT_INIT], [disable-static], [_LT_ENABLE_STATIC([no])])
+ 
+ # Old names:
+ AC_DEFUN([AC_ENABLE_STATIC],
+ [_LT_SET_OPTION([LT_INIT], m4_if([$1], [no], [disable-])[static])
+ ])
+ 
+ AC_DEFUN([AC_DISABLE_STATIC],
+ [_LT_SET_OPTION([LT_INIT], [disable-static])
+ ])
+ 
+ AU_DEFUN([AM_ENABLE_STATIC], [AC_ENABLE_STATIC($@)])
+ AU_DEFUN([AM_DISABLE_STATIC], [AC_DISABLE_STATIC($@)])
+ 
+ dnl aclocal-1.4 backwards compatibility:
+ dnl AC_DEFUN([AM_ENABLE_STATIC], [])
+ dnl AC_DEFUN([AM_DISABLE_STATIC], [])
+ 
+ 
+ 
+ # _LT_ENABLE_FAST_INSTALL([DEFAULT])
+ # ----------------------------------
+ # implement the --enable-fast-install flag, and support the `fast-install'
+ # and `disable-fast-install' LT_INIT options.
+ # DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
+ m4_define([_LT_ENABLE_FAST_INSTALL],
+ [m4_define([_LT_ENABLE_FAST_INSTALL_DEFAULT], [m4_if($1, no, no, yes)])dnl
+ AC_ARG_ENABLE([fast-install],
+     [AS_HELP_STRING([--enable-fast-install@<:@=PKGS@:>@],
+     [optimize for fast installation @<:@default=]_LT_ENABLE_FAST_INSTALL_DEFAULT[@:>@])],
+     [p=${PACKAGE-default}
+     case $enableval in
+     yes) enable_fast_install=yes ;;
+     no) enable_fast_install=no ;;
+     *)
+       enable_fast_install=no
+       # Look at the argument we got.  We use all the common list separators.
+       lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+       for pkg in $enableval; do
+ 	IFS="$lt_save_ifs"
+ 	if test "X$pkg" = "X$p"; then
+ 	  enable_fast_install=yes
+ 	fi
+       done
+       IFS="$lt_save_ifs"
+       ;;
+     esac],
+     [enable_fast_install=]_LT_ENABLE_FAST_INSTALL_DEFAULT)
+ 
+ _LT_DECL([fast_install], [enable_fast_install], [0],
+ 	 [Whether or not to optimize for fast installation])dnl
+ ])# _LT_ENABLE_FAST_INSTALL
+ 
+ LT_OPTION_DEFINE([LT_INIT], [fast-install], [_LT_ENABLE_FAST_INSTALL([yes])])
+ LT_OPTION_DEFINE([LT_INIT], [disable-fast-install], [_LT_ENABLE_FAST_INSTALL([no])])
+ 
+ # Old names:
+ AU_DEFUN([AC_ENABLE_FAST_INSTALL],
+ [_LT_SET_OPTION([LT_INIT], m4_if([$1], [no], [disable-])[fast-install])
+ AC_DIAGNOSE([obsolete],
+ [$0: Remove this warning and the call to _LT_SET_OPTION when you put
+ the `fast-install' option into LT_INIT's first parameter.])
+ ])
+ 
+ AU_DEFUN([AC_DISABLE_FAST_INSTALL],
+ [_LT_SET_OPTION([LT_INIT], [disable-fast-install])
+ AC_DIAGNOSE([obsolete],
+ [$0: Remove this warning and the call to _LT_SET_OPTION when you put
+ the `disable-fast-install' option into LT_INIT's first parameter.])
+ ])
+ 
+ dnl aclocal-1.4 backwards compatibility:
+ dnl AC_DEFUN([AC_ENABLE_FAST_INSTALL], [])
+ dnl AC_DEFUN([AM_DISABLE_FAST_INSTALL], [])
+ 
+ 
+ # _LT_WITH_PIC([MODE])
+ # --------------------
+ # implement the --with-pic flag, and support the `pic-only' and `no-pic'
+ # LT_INIT options.
+ # MODE is either `yes' or `no'.  If omitted, it defaults to `both'.
+ m4_define([_LT_WITH_PIC],
+ [AC_ARG_WITH([pic],
+     [AS_HELP_STRING([--with-pic],
+ 	[try to use only PIC/non-PIC objects @<:@default=use both@:>@])],
+     [pic_mode="$withval"],
+     [pic_mode=default])
+ 
+ test -z "$pic_mode" && pic_mode=m4_default([$1], [default])
+ 
+ _LT_DECL([], [pic_mode], [0], [What type of objects to build])dnl
+ ])# _LT_WITH_PIC
+ 
+ LT_OPTION_DEFINE([LT_INIT], [pic-only], [_LT_WITH_PIC([yes])])
+ LT_OPTION_DEFINE([LT_INIT], [no-pic], [_LT_WITH_PIC([no])])
+ 
+ # Old name:
+ AU_DEFUN([AC_LIBTOOL_PICMODE],
+ [_LT_SET_OPTION([LT_INIT], [pic-only])
+ AC_DIAGNOSE([obsolete],
+ [$0: Remove this warning and the call to _LT_SET_OPTION when you
+ put the `pic-only' option into LT_INIT's first parameter.])
+ ])
+ 
+ dnl aclocal-1.4 backwards compatibility:
+ dnl AC_DEFUN([AC_LIBTOOL_PICMODE], [])
+ 
+ 
+ m4_define([_LTDL_MODE], [])
+ LT_OPTION_DEFINE([LTDL_INIT], [nonrecursive],
+ 		 [m4_define([_LTDL_MODE], [nonrecursive])])
+ LT_OPTION_DEFINE([LTDL_INIT], [recursive],
+ 		 [m4_define([_LTDL_MODE], [recursive])])
+ LT_OPTION_DEFINE([LTDL_INIT], [subproject],
+ 		 [m4_define([_LTDL_MODE], [subproject])])
+ 
+ m4_define([_LTDL_TYPE], [])
+ LT_OPTION_DEFINE([LTDL_INIT], [installable],
+ 		 [m4_define([_LTDL_TYPE], [installable])])
+ LT_OPTION_DEFINE([LTDL_INIT], [convenience],
+ 		 [m4_define([_LTDL_TYPE], [convenience])])
+ 
+ # ltsugar.m4 -- libtool m4 base layer.                         -*-Autoconf-*-
+ #
+ # Copyright (C) 2004, 2005, 2007, 2008 Free Software Foundation, Inc.
+ # Written by Gary V. Vaughan, 2004
+ #
+ # This file is free software; the Free Software Foundation gives
+ # unlimited permission to copy and/or distribute it, with or without
+ # modifications, as long as this notice is preserved.
+ 
+ # serial 6 ltsugar.m4
+ 
+ # This is to help aclocal find these macros, as it can't see m4_define.
+ AC_DEFUN([LTSUGAR_VERSION], [m4_if([0.1])])
+ 
+ 
+ # lt_join(SEP, ARG1, [ARG2...])
+ # -----------------------------
+ # Produce ARG1SEPARG2...SEPARGn, omitting [] arguments and their
+ # associated separator.
+ # Needed until we can rely on m4_join from Autoconf 2.62, since all earlier
+ # versions in m4sugar had bugs.
+ m4_define([lt_join],
+ [m4_if([$#], [1], [],
+        [$#], [2], [[$2]],
+        [m4_if([$2], [], [], [[$2]_])$0([$1], m4_shift(m4_shift($@)))])])
+ m4_define([_lt_join],
+ [m4_if([$#$2], [2], [],
+        [m4_if([$2], [], [], [[$1$2]])$0([$1], m4_shift(m4_shift($@)))])])
+ 
+ 
+ # lt_car(LIST)
+ # lt_cdr(LIST)
+ # ------------
+ # Manipulate m4 lists.
+ # These macros are necessary as long as will still need to support
+ # Autoconf-2.59 which quotes differently.
+ m4_define([lt_car], [[$1]])
+ m4_define([lt_cdr],
+ [m4_if([$#], 0, [m4_fatal([$0: cannot be called without arguments])],
+        [$#], 1, [],
+        [m4_dquote(m4_shift($@))])])
+ m4_define([lt_unquote], $1)
+ 
+ 
+ # lt_append(MACRO-NAME, STRING, [SEPARATOR])
+ # ------------------------------------------
+ # Redefine MACRO-NAME to hold its former content plus `SEPARATOR'`STRING'.
+ # Note that neither SEPARATOR nor STRING are expanded; they are appended
+ # to MACRO-NAME as is (leaving the expansion for when MACRO-NAME is invoked).
+ # No SEPARATOR is output if MACRO-NAME was previously undefined (different
+ # than defined and empty).
+ #
+ # This macro is needed until we can rely on Autoconf 2.62, since earlier
+ # versions of m4sugar mistakenly expanded SEPARATOR but not STRING.
+ m4_define([lt_append],
+ [m4_define([$1],
+ 	   m4_ifdef([$1], [m4_defn([$1])[$3]])[$2])])
+ 
+ 
+ 
+ # lt_combine(SEP, PREFIX-LIST, INFIX, SUFFIX1, [SUFFIX2...])
+ # ----------------------------------------------------------
+ # Produce a SEP delimited list of all paired combinations of elements of
+ # PREFIX-LIST with SUFFIX1 through SUFFIXn.  Each element of the list
+ # has the form PREFIXmINFIXSUFFIXn.
+ # Needed until we can rely on m4_combine added in Autoconf 2.62.
+ m4_define([lt_combine],
+ [m4_if(m4_eval([$# > 3]), [1],
+        [m4_pushdef([_Lt_sep], [m4_define([_Lt_sep], m4_defn([lt_car]))])]]dnl
+ [[m4_foreach([_Lt_prefix], [$2],
+ 	     [m4_foreach([_Lt_suffix],
+ 		]m4_dquote(m4_dquote(m4_shift(m4_shift(m4_shift($@)))))[,
+ 	[_Lt_sep([$1])[]m4_defn([_Lt_prefix])[$3]m4_defn([_Lt_suffix])])])])])
+ 
+ 
+ # lt_if_append_uniq(MACRO-NAME, VARNAME, [SEPARATOR], [UNIQ], [NOT-UNIQ])
+ # -----------------------------------------------------------------------
+ # Iff MACRO-NAME does not yet contain VARNAME, then append it (delimited
+ # by SEPARATOR if supplied) and expand UNIQ, else NOT-UNIQ.
+ m4_define([lt_if_append_uniq],
+ [m4_ifdef([$1],
+ 	  [m4_if(m4_index([$3]m4_defn([$1])[$3], [$3$2$3]), [-1],
+ 		 [lt_append([$1], [$2], [$3])$4],
+ 		 [$5])],
+ 	  [lt_append([$1], [$2], [$3])$4])])
+ 
+ 
+ # lt_dict_add(DICT, KEY, VALUE)
+ # -----------------------------
+ m4_define([lt_dict_add],
+ [m4_define([$1($2)], [$3])])
+ 
+ 
+ # lt_dict_add_subkey(DICT, KEY, SUBKEY, VALUE)
+ # --------------------------------------------
+ m4_define([lt_dict_add_subkey],
+ [m4_define([$1($2:$3)], [$4])])
+ 
+ 
+ # lt_dict_fetch(DICT, KEY, [SUBKEY])
+ # ----------------------------------
+ m4_define([lt_dict_fetch],
+ [m4_ifval([$3],
+ 	m4_ifdef([$1($2:$3)], [m4_defn([$1($2:$3)])]),
+     m4_ifdef([$1($2)], [m4_defn([$1($2)])]))])
+ 
+ 
+ # lt_if_dict_fetch(DICT, KEY, [SUBKEY], VALUE, IF-TRUE, [IF-FALSE])
+ # -----------------------------------------------------------------
+ m4_define([lt_if_dict_fetch],
+ [m4_if(lt_dict_fetch([$1], [$2], [$3]), [$4],
+ 	[$5],
+     [$6])])
+ 
+ 
+ # lt_dict_filter(DICT, [SUBKEY], VALUE, [SEPARATOR], KEY, [...])
+ # --------------------------------------------------------------
+ m4_define([lt_dict_filter],
+ [m4_if([$5], [], [],
+   [lt_join(m4_quote(m4_default([$4], [[, ]])),
+            lt_unquote(m4_split(m4_normalize(m4_foreach(_Lt_key, lt_car([m4_shiftn(4, $@)]),
+ 		      [lt_if_dict_fetch([$1], _Lt_key, [$2], [$3], [_Lt_key ])])))))])[]dnl
+ ])
+ 
+ # ltversion.m4 -- version numbers			-*- Autoconf -*-
+ #
+ #   Copyright (C) 2004 Free Software Foundation, Inc.
+ #   Written by Scott James Remnant, 2004
+ #
+ # This file is free software; the Free Software Foundation gives
+ # unlimited permission to copy and/or distribute it, with or without
+ # modifications, as long as this notice is preserved.
+ 
+ # @configure_input@
+ 
+ # serial 3293 ltversion.m4
+ # This file is part of GNU Libtool
+ 
+ m4_define([LT_PACKAGE_VERSION], [2.4])
+ m4_define([LT_PACKAGE_REVISION], [1.3293])
+ 
+ AC_DEFUN([LTVERSION_VERSION],
+ [macro_version='2.4'
+ macro_revision='1.3293'
+ _LT_DECL(, macro_version, 0, [Which release of libtool.m4 was used?])
+ _LT_DECL(, macro_revision, 0)
+ ])
+ 
+ # lt~obsolete.m4 -- aclocal satisfying obsolete definitions.    -*-Autoconf-*-
+ #
+ #   Copyright (C) 2004, 2005, 2007, 2009 Free Software Foundation, Inc.
+ #   Written by Scott James Remnant, 2004.
+ #
+ # This file is free software; the Free Software Foundation gives
+ # unlimited permission to copy and/or distribute it, with or without
+ # modifications, as long as this notice is preserved.
+ 
+ # serial 5 lt~obsolete.m4
+ 
+ # These exist entirely to fool aclocal when bootstrapping libtool.
+ #
+ # In the past libtool.m4 has provided macros via AC_DEFUN (or AU_DEFUN)
+ # which have later been changed to m4_define as they aren't part of the
+ # exported API, or moved to Autoconf or Automake where they belong.
+ #
+ # The trouble is, aclocal is a bit thick.  It'll see the old AC_DEFUN
+ # in /usr/share/aclocal/libtool.m4 and remember it, then when it sees us
+ # using a macro with the same name in our local m4/libtool.m4 it'll
+ # pull the old libtool.m4 in (it doesn't see our shiny new m4_define
+ # and doesn't know about Autoconf macros at all.)
+ #
+ # So we provide this file, which has a silly filename so it's always
+ # included after everything else.  This provides aclocal with the
+ # AC_DEFUNs it wants, but when m4 processes it, it doesn't do anything
+ # because those macros already exist, or will be overwritten later.
+ # We use AC_DEFUN over AU_DEFUN for compatibility with aclocal-1.6. 
+ #
+ # Anytime we withdraw an AC_DEFUN or AU_DEFUN, remember to add it here.
+ # Yes, that means every name once taken will need to remain here until
+ # we give up compatibility with versions before 1.7, at which point
+ # we need to keep only those names which we still refer to.
+ 
+ # This is to help aclocal find these macros, as it can't see m4_define.
+ AC_DEFUN([LTOBSOLETE_VERSION], [m4_if([1])])
+ 
+ m4_ifndef([AC_LIBTOOL_LINKER_OPTION],	[AC_DEFUN([AC_LIBTOOL_LINKER_OPTION])])
+ m4_ifndef([AC_PROG_EGREP],		[AC_DEFUN([AC_PROG_EGREP])])
+ m4_ifndef([_LT_AC_PROG_ECHO_BACKSLASH],	[AC_DEFUN([_LT_AC_PROG_ECHO_BACKSLASH])])
+ m4_ifndef([_LT_AC_SHELL_INIT],		[AC_DEFUN([_LT_AC_SHELL_INIT])])
+ m4_ifndef([_LT_AC_SYS_LIBPATH_AIX],	[AC_DEFUN([_LT_AC_SYS_LIBPATH_AIX])])
+ m4_ifndef([_LT_PROG_LTMAIN],		[AC_DEFUN([_LT_PROG_LTMAIN])])
+ m4_ifndef([_LT_AC_TAGVAR],		[AC_DEFUN([_LT_AC_TAGVAR])])
+ m4_ifndef([AC_LTDL_ENABLE_INSTALL],	[AC_DEFUN([AC_LTDL_ENABLE_INSTALL])])
+ m4_ifndef([AC_LTDL_PREOPEN],		[AC_DEFUN([AC_LTDL_PREOPEN])])
+ m4_ifndef([_LT_AC_SYS_COMPILER],	[AC_DEFUN([_LT_AC_SYS_COMPILER])])
+ m4_ifndef([_LT_AC_LOCK],		[AC_DEFUN([_LT_AC_LOCK])])
+ m4_ifndef([AC_LIBTOOL_SYS_OLD_ARCHIVE],	[AC_DEFUN([AC_LIBTOOL_SYS_OLD_ARCHIVE])])
+ m4_ifndef([_LT_AC_TRY_DLOPEN_SELF],	[AC_DEFUN([_LT_AC_TRY_DLOPEN_SELF])])
+ m4_ifndef([AC_LIBTOOL_PROG_CC_C_O],	[AC_DEFUN([AC_LIBTOOL_PROG_CC_C_O])])
+ m4_ifndef([AC_LIBTOOL_SYS_HARD_LINK_LOCKS], [AC_DEFUN([AC_LIBTOOL_SYS_HARD_LINK_LOCKS])])
+ m4_ifndef([AC_LIBTOOL_OBJDIR],		[AC_DEFUN([AC_LIBTOOL_OBJDIR])])
+ m4_ifndef([AC_LTDL_OBJDIR],		[AC_DEFUN([AC_LTDL_OBJDIR])])
+ m4_ifndef([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH], [AC_DEFUN([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH])])
+ m4_ifndef([AC_LIBTOOL_SYS_LIB_STRIP],	[AC_DEFUN([AC_LIBTOOL_SYS_LIB_STRIP])])
+ m4_ifndef([AC_PATH_MAGIC],		[AC_DEFUN([AC_PATH_MAGIC])])
+ m4_ifndef([AC_PROG_LD_GNU],		[AC_DEFUN([AC_PROG_LD_GNU])])
+ m4_ifndef([AC_PROG_LD_RELOAD_FLAG],	[AC_DEFUN([AC_PROG_LD_RELOAD_FLAG])])
+ m4_ifndef([AC_DEPLIBS_CHECK_METHOD],	[AC_DEFUN([AC_DEPLIBS_CHECK_METHOD])])
+ m4_ifndef([AC_LIBTOOL_PROG_COMPILER_NO_RTTI], [AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_NO_RTTI])])
+ m4_ifndef([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE], [AC_DEFUN([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE])])
+ m4_ifndef([AC_LIBTOOL_PROG_COMPILER_PIC], [AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_PIC])])
+ m4_ifndef([AC_LIBTOOL_PROG_LD_SHLIBS],	[AC_DEFUN([AC_LIBTOOL_PROG_LD_SHLIBS])])
+ m4_ifndef([AC_LIBTOOL_POSTDEP_PREDEP],	[AC_DEFUN([AC_LIBTOOL_POSTDEP_PREDEP])])
+ m4_ifndef([LT_AC_PROG_EGREP],		[AC_DEFUN([LT_AC_PROG_EGREP])])
+ m4_ifndef([LT_AC_PROG_SED],		[AC_DEFUN([LT_AC_PROG_SED])])
+ m4_ifndef([_LT_CC_BASENAME],		[AC_DEFUN([_LT_CC_BASENAME])])
+ m4_ifndef([_LT_COMPILER_BOILERPLATE],	[AC_DEFUN([_LT_COMPILER_BOILERPLATE])])
+ m4_ifndef([_LT_LINKER_BOILERPLATE],	[AC_DEFUN([_LT_LINKER_BOILERPLATE])])
+ m4_ifndef([_AC_PROG_LIBTOOL],		[AC_DEFUN([_AC_PROG_LIBTOOL])])
+ m4_ifndef([AC_LIBTOOL_SETUP],		[AC_DEFUN([AC_LIBTOOL_SETUP])])
+ m4_ifndef([_LT_AC_CHECK_DLFCN],		[AC_DEFUN([_LT_AC_CHECK_DLFCN])])
+ m4_ifndef([AC_LIBTOOL_SYS_DYNAMIC_LINKER],	[AC_DEFUN([AC_LIBTOOL_SYS_DYNAMIC_LINKER])])
+ m4_ifndef([_LT_AC_TAGCONFIG],		[AC_DEFUN([_LT_AC_TAGCONFIG])])
+ m4_ifndef([AC_DISABLE_FAST_INSTALL],	[AC_DEFUN([AC_DISABLE_FAST_INSTALL])])
+ m4_ifndef([_LT_AC_LANG_CXX],		[AC_DEFUN([_LT_AC_LANG_CXX])])
+ m4_ifndef([_LT_AC_LANG_F77],		[AC_DEFUN([_LT_AC_LANG_F77])])
+ m4_ifndef([_LT_AC_LANG_GCJ],		[AC_DEFUN([_LT_AC_LANG_GCJ])])
+ m4_ifndef([AC_LIBTOOL_LANG_C_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_C_CONFIG])])
+ m4_ifndef([_LT_AC_LANG_C_CONFIG],	[AC_DEFUN([_LT_AC_LANG_C_CONFIG])])
+ m4_ifndef([AC_LIBTOOL_LANG_CXX_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_CXX_CONFIG])])
+ m4_ifndef([_LT_AC_LANG_CXX_CONFIG],	[AC_DEFUN([_LT_AC_LANG_CXX_CONFIG])])
+ m4_ifndef([AC_LIBTOOL_LANG_F77_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_F77_CONFIG])])
+ m4_ifndef([_LT_AC_LANG_F77_CONFIG],	[AC_DEFUN([_LT_AC_LANG_F77_CONFIG])])
+ m4_ifndef([AC_LIBTOOL_LANG_GCJ_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_GCJ_CONFIG])])
+ m4_ifndef([_LT_AC_LANG_GCJ_CONFIG],	[AC_DEFUN([_LT_AC_LANG_GCJ_CONFIG])])
+ m4_ifndef([AC_LIBTOOL_LANG_RC_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_RC_CONFIG])])
+ m4_ifndef([_LT_AC_LANG_RC_CONFIG],	[AC_DEFUN([_LT_AC_LANG_RC_CONFIG])])
+ m4_ifndef([AC_LIBTOOL_CONFIG],		[AC_DEFUN([AC_LIBTOOL_CONFIG])])
+ m4_ifndef([_LT_AC_FILE_LTDLL_C],	[AC_DEFUN([_LT_AC_FILE_LTDLL_C])])
+ m4_ifndef([_LT_REQUIRED_DARWIN_CHECKS],	[AC_DEFUN([_LT_REQUIRED_DARWIN_CHECKS])])
+ m4_ifndef([_LT_AC_PROG_CXXCPP],		[AC_DEFUN([_LT_AC_PROG_CXXCPP])])
+ m4_ifndef([_LT_PREPARE_SED_QUOTE_VARS],	[AC_DEFUN([_LT_PREPARE_SED_QUOTE_VARS])])
+ m4_ifndef([_LT_PROG_ECHO_BACKSLASH],	[AC_DEFUN([_LT_PROG_ECHO_BACKSLASH])])
+ m4_ifndef([_LT_PROG_F77],		[AC_DEFUN([_LT_PROG_F77])])
+ m4_ifndef([_LT_PROG_FC],		[AC_DEFUN([_LT_PROG_FC])])
+ m4_ifndef([_LT_PROG_CXX],		[AC_DEFUN([_LT_PROG_CXX])])
+ 
  # Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
  #
  # This file is free software; the Free Software Foundation
***************
*** 566,571 ****
--- 1177,1203 ----
  fi
  AC_SUBST(install_sh)])
  
+ # Copyright (C) 2003, 2005  Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+ # serial 2
+ 
+ # Check whether the underlying file-system supports filenames
+ # with a leading dot.  For instance MS-DOS doesn't.
+ AC_DEFUN([AM_SET_LEADING_DOT],
+ [rm -rf .tst 2>/dev/null
+ mkdir .tst 2>/dev/null
+ if test -d .tst; then
+   am__leading_dot=.
+ else
+   am__leading_dot=_
+ fi
+ rmdir .tst 2>/dev/null
+ AC_SUBST([am__leading_dot])])
+ 
  # Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-
  # From Jim Meyering
  
***************
*** 727,732 ****
--- 1359,1429 ----
  esac
  ])
  
+ # Copyright (C) 1998, 1999, 2000, 2001, 2003, 2004, 2005, 2006
+ # Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+ # serial 6
+ 
+ # AM_ENABLE_MULTILIB([MAKEFILE], [REL-TO-TOP-SRCDIR])
+ # ---------------------------------------------------
+ # Add --enable-multilib to configure.
+ AC_DEFUN([AM_ENABLE_MULTILIB],
+ [# Default to --enable-multilib
+ AC_ARG_ENABLE(multilib,
+ [  --enable-multilib       build many library versions (default)],
+ [case "$enableval" in
+   yes) multilib=yes ;;
+   no)  multilib=no ;;
+   *)   AC_MSG_ERROR([bad value $enableval for multilib option]) ;;
+  esac],
+ 	      [multilib=yes])
+ 
+ # We may get other options which we leave undocumented:
+ # --with-target-subdir, --with-multisrctop, --with-multisubdir
+ # See config-ml.in if you want the gory details.
+ 
+ if test "$srcdir" = "."; then
+   if test "$with_target_subdir" != "."; then
+     multi_basedir="$srcdir/$with_multisrctop../$2"
+   else
+     multi_basedir="$srcdir/$with_multisrctop$2"
+   fi
+ else
+   multi_basedir="$srcdir/$2"
+ fi
+ AC_SUBST(multi_basedir)
+ 
+ # Even if the default multilib is not a cross compilation,
+ # it may be that some of the other multilibs are.
+ if test $cross_compiling = no && test $multilib = yes \
+    && test "x${with_multisubdir}" != x ; then
+    cross_compiling=maybe
+ fi
+ 
+ AC_OUTPUT_COMMANDS([
+ # Only add multilib support code if we just rebuilt the top-level
+ # Makefile.
+ case " $CONFIG_FILES " in
+  *" ]m4_default([$1],Makefile)[ "*)
+    ac_file=]m4_default([$1],Makefile)[ . ${multi_basedir}/config-ml.in
+    ;;
+ esac],
+ 		   [
+ srcdir="$srcdir"
+ host="$host"
+ target="$target"
+ with_multisubdir="$with_multisubdir"
+ with_multisrctop="$with_multisrctop"
+ with_target_subdir="$with_target_subdir"
+ ac_configure_args="${multilib_arg} ${ac_configure_args}"
+ multi_basedir="$multi_basedir"
+ CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
+ CC="$CC"])])dnl
+ 
  # Helper functions for option handling.                     -*- Autoconf -*-
  
  # Copyright (C) 2001, 2002, 2003, 2005, 2008  Free Software Foundation, Inc.
***************
*** 968,979 ****
  AC_SUBST([am__untar])
  ]) # _AM_PROG_TAR
  
- m4_include([../config/depstand.m4])
- m4_include([../config/lead-dot.m4])
- m4_include([../config/multi.m4])
- m4_include([../config/override.m4])
- m4_include([../ltoptions.m4])
- m4_include([../ltsugar.m4])
- m4_include([../ltversion.m4])
- m4_include([../lt~obsolete.m4])
  m4_include([acinclude.m4])
--- 1665,1668 ----
diff -bcrN gcc-4.6.1.org/zlib/configure gcc-4.6.1/zlib/configure
*** gcc-4.6.1.org/zlib/configure	2011-02-13 20:45:53.000000000 +0900
--- gcc-4.6.1/zlib/configure	2011-08-06 17:03:06.795722707 +0900
***************
*** 2175,2183 ****
  
  
  
- 
- 
- 
  # Default to --enable-multilib
  # Check whether --enable-multilib was given.
  if test "${enable_multilib+set}" = set; then :
--- 2175,2180 ----
***************
*** 3265,3274 ****
  else
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
! 
  int
  main ()
  {
  
    ;
    return 0;
--- 3262,3273 ----
  else
    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
  /* end confdefs.h.  */
! #include <stdio.h>
  int
  main ()
  {
+ FILE *f = fopen ("conftest.out", "w");
+  return ferror (f) || fclose (f) != 0;
  
    ;
    return 0;
***************
*** 3902,3909 ****
  
  
  
! macro_version='2.2.7a'
! macro_revision='1.3134'
  
  
  
--- 3901,3908 ----
  
  
  
! macro_version='2.4'
! macro_revision='1.3293'
  
  
  
***************
*** 10386,10392 ****
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<_LT_EOF
! #line 10389 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 10385,10391 ----
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<_LT_EOF
! #line 10388 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 10492,10498 ****
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<_LT_EOF
! #line 10495 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 10491,10497 ----
    lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<_LT_EOF
! #line 10494 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 11921,11929 ****
  multi_basedir="$multi_basedir"
  CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
  CC="$CC"
- CXX="$CXX"
- GFORTRAN="$GFORTRAN"
- GCJ="$GCJ"
  AMDEP_TRUE="$AMDEP_TRUE" ac_aux_dir="$ac_aux_dir"
  
  
--- 11920,11925 ----
