SUBDIRS = . testsuite

BUILT_SOURCES = lexer.cc parser.cc parser.h

bin_PROGRAMS = esidl esidl2 entdump reflect

esidl_SOURCES = src/driver.cpp

esidl2_SOURCES = src/lexer.ll src/parser.yy src/esidl.cpp include/esidl.h \
		 include/utf.h \
		 src/print.cpp src/cxx.cpp \
		 src/ent.cpp \
		 include/expr.h include/string.h include/cplusplus.h

esidl2-cxx.$(OBJEXT) : Makefile

esidl2_CXXFLAGS = -D YYERROR_VERBOSE

entdump_SOURCES = src/entdump.cpp

reflect_SOURCES = src/reflect.cpp

AM_YFLAGS = -d -v -t

AM_CPPFLAGS = \
	-I$(srcdir)/include \
	-I$(srcdir)/src \
	-I- \
	-I$(srcdir)/../include

clean-local:
	-rm -f $(BUILT_SOURCES) parser.output

dist-hook:
	-rm -f $(distdir)/lexer.cc $(distdir)/parser.cc $(distdir)/parser.h
